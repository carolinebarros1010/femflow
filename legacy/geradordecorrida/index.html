<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Endurance FemFlow</title>
  <!-- PWA: Manifesto -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#D1A697" />
  <link rel="apple-touch-icon" href="https://www.femflow.com.br/assets/icon-192.png" />
    <!-- PWA -->
  <link rel="manifest" href="manifest.json">

  <!-- CSS -->
  <link rel="stylesheet" href="./styles.css">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    :root { --bg:#FAF7F5; --panel:#F3C1C1; --ink:#2E2E2E; --muted:#6F6F6F; --teal:#335953; --terracota:#D1A697; --pessego:#CBB1E6; --card:#F3C1C1; --border:#D1A697; }
    html,body{ background:var(--bg); color:var(--ink); font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,Helvetica,Arial,sans-serif; margin:0; overflow-x:hidden; }
    *{ transition:background .3s ease,color .3s ease,border .3s ease }

    /* Tema claro */
    @media (prefers-color-scheme: light) {
      :root { --bg:#FAF7F5; --panel:#F3C1C1; --ink:#2E2E2E; --muted:#6F6F6F; --teal:#335953; --terracota:#D1A697; --pessego:#CBB1E6; --card:#F3C1C1; }
      body { color:var(--ink); background:var(--bg) }
      .card, input, select { background:var(--card); color:var(--ink) }
      .btn { color:#fff }
      th, td { background:#f8fafc; color:var(--ink) }
    }

    /* ===== Splash animado (v20) ===== */
    #splashScreen { position:fixed; inset:0; background:linear-gradient(135deg,var(--terracota),var(--pessego)); display:flex; align-items:center; justify-content:center; z-index:10000; animation:fadeOut 1s ease forwards; animation-delay:2.8s; }
    .splash-content { text-align:center; animation:floatUp 1.5s ease-out; }
    #logoMyFlow { filter: drop-shadow(0 0 15px rgba(255,255,255,0.4)); animation: glowLogo 2s ease-in-out infinite alternate; }
    .splash-title { margin-top:8px; color:#fff; font-size:1rem; letter-spacing:.5px; opacity:.9 }
    @keyframes fadeOut { to { opacity:0; visibility:hidden } }
    @keyframes floatUp { from { transform:translateY(20px); opacity:0 } to { transform:translateY(0); opacity:1 } }
    @keyframes glowLogo { 0% { filter:drop-shadow(0 0 5px rgba(255,255,255,.3)) } 100% { filter:drop-shadow(0 0 20px rgba(255,255,255,.8)) } }
    @media (prefers-color-scheme: dark) { #splashScreen { background:linear-gradient(135deg,var(--teal),var(--terracota)) } }

    /* ===== TopBar fixo com Premium ===== */
    #topBar { position:fixed; top:0; left:0; width:100%; display:flex; justify-content:space-between; align-items:center; background:rgba(15,23,42,0.8); backdrop-filter:blur(10px); padding:10px 18px; z-index:9999; opacity:0; transform:translateY(-10px); animation:fadeSlide .5s ease forwards; }
    @keyframes fadeSlide { to { opacity:1; transform:translateY(0) } }
    #siteTitle { font-weight:700; color:var(--pessego); font-size:.95rem; letter-spacing:.3px }
    @media (prefers-color-scheme: light) { #topBar { background:rgba(255,255,255,0.9); backdrop-filter:blur(12px) } #siteTitle { color:var(--terracota) } }
    @media (max-width:600px){ #siteTitle{ font-size:.85rem } }

    /* Bot√£o Premium com glow e tema din√¢mico */
    @keyframes glowPulse { 0%{box-shadow:0 0 10px rgba(209,166,151,.6), 0 0 20px rgba(203,177,230,.4)} 50%{box-shadow:0 0 20px rgba(209,166,151,.9), 0 0 30px rgba(203,177,230,.7)} 100%{box-shadow:0 0 10px rgba(209,166,151,.6), 0 0 20px rgba(203,177,230,.4)} }
    #btnPremium{ background:linear-gradient(90deg,var(--terracota),var(--pessego)); color:#2E2E2E; font-weight:700; font-size:.9rem; padding:10px 16px; border-radius:8px; text-decoration:none; animation:glowPulse 3s ease-in-out infinite; transition:transform .2s ease, opacity .2s ease, background .3s ease }
    #btnPremium:hover{ transform:scale(1.05); opacity:.9 }
    @media (prefers-color-scheme: light){ #btnPremium{ background:linear-gradient(90deg,var(--teal),var(--terracota)); color:#fff } }
    @media (prefers-color-scheme: dark){ #btnPremium{ background:linear-gradient(90deg,var(--pessego),var(--terracota)); color:#2E2E2E } }
    @media (max-width:600px){ #btnPremium{ font-size:.8rem; padding:8px 12px } }

    /* ===== Layout principal ===== */
    .wrap{ max-width:1200px; margin:auto; padding:22px; margin-top:70px }
    .brand{ font-weight:900; font-size:1.3rem; letter-spacing:.3px; color:var(--ink) }
    .sub{ color:var(--muted); margin:0 0 16px }
    .grid{ display:grid; gap:16px }
    .row,.row3{ display:grid; gap:10px }
    .row{ grid-template-columns:1fr 1fr }
    .row3{ grid-template-columns:repeat(3,1fr) }
    @media (max-width:900px){ .grid{ grid-template-columns:1fr } .row,.row3{ grid-template-columns:1fr } .brand{ font-size:1.1rem } }

    .card{ background:linear-gradient(180deg,rgba(255,255,255,.7),rgba(255,255,255,.35)); border:1px solid var(--border); border-radius:16px; padding:18px; overflow-x:auto }
    label{ display:block; font-size:.85rem; margin:8px 0 6px; color:var(--muted) }
    input,select,button{ width:100%; box-sizing:border-box; background:#FAF7F5; color:var(--ink); border:1px solid var(--border); border-radius:12px; padding:10px 12px; font-size:14px; outline:none }
    input:focus,select:focus{ border-color:var(--teal); box-shadow:0 0 0 3px rgba(51,89,83,.15) }
    .btn{ cursor:pointer; background:linear-gradient(90deg,var(--teal),var(--terracota)); border:none; font-weight:700; border-radius:10px; padding:10px 14px; min-width:150px; color:#fff }
    .btn:hover{ opacity:.9 }

    /* A√ß√µes e divis√≥rias */
    .actions{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-top:30px; padding-top:20px; border-top:1px solid rgba(255,255,255,.08) }
    @media (prefers-color-scheme: light){ .actions{ border-top:1px solid rgba(0,0,0,.1) } }
    section.card:nth-of-type(2){ border-top:1px solid rgba(255,255,255,.08); margin-top:28px; padding-top:24px }
    @media (prefers-color-scheme: light){ section.card:nth-of-type(2){ border-top:1px solid rgba(0,0,0,.1) } }

    .kpi{ display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:10px; margin-top:8px }
    .kpi>div{ background:#FAF7F5; border:1px solid var(--border); border-radius:12px; padding:12px; text-align:center }
    .kpi .t{ display:block; color:var(--muted); font-size:.75rem }
    .kpi .v{ display:block; font-size:1.1rem; font-weight:800 }

    table{ width:100%; border-collapse:separate; border-spacing:0 8px; min-width:700px }
    th,td{ text-align:left; padding:10px; background:#FAF7F5; border-top:1px solid var(--border); border-bottom:1px solid var(--border); color:var(--ink) }
    #tabelaWrap{ overflow-x:auto }

    .card-grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:10px }
    @media (max-width:400px){ .card-grid{ grid-template-columns:1fr } }
    .mini-card{ background:#FAF7F5; border:1px solid var(--border); border-radius:14px; padding:14px }
    .mini-card h4{ margin:0 0 6px }
    .tag{ display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.12); font-size:.72rem; color:var(--pessego) }
    canvas{ width:100%!important; height:200px!important }

    /* Microfeedback visual */
    @keyframes pulseEffect { 0%{ box-shadow:0 0 0 rgba(204,106,90,.6); transform:scale(1) } 50%{ box-shadow:0 0 20px rgba(204,106,90,.6); transform:scale(.98) } 100%{ box-shadow:0 0 0 rgba(204,106,90,0); transform:scale(1) } }
    .pulse{ animation:pulseEffect .3s ease }
    
/* ==== Corre√ß√£o contraste inputs no tema claro ==== */
@media (prefers-color-scheme: light) {
  input, select, textarea {
    background: #f9fafb; /* leve contraste sobre o fundo branco */
    color: #1e293b; /* texto bem escuro e leg√≠vel */
    border: 1px solid #cbd5e1; /* borda suave mas vis√≠vel */
  }

  input:focus, select:focus, textarea:focus {
    border-color: #335953; /* teal da paleta */
    background: #ffffff; /* realce ao foco */
    color: #0f172a; /* refor√ßo de contraste */
  }

  ::placeholder {
    color: #94a3b8; /* tom m√©dio vis√≠vel */
  }
  
  /* ==== Foco suave e coerente com pulse (v23.3) ==== */
input, select, textarea {
  transition: border-color 0.25s ease, box-shadow 0.25s ease, background 0.25s ease;
}

input:focus, select:focus, textarea:focus {
  border-color: var(--teal);
  box-shadow: 0 0 8px rgba(51, 89, 83, 0.3);
  background: #ffffff10; /* leve realce transl√∫cido no modo escuro */
}

@media (prefers-color-scheme: light) {
  input:focus, select:focus, textarea:focus {
    border-color: #335953;
    box-shadow: 0 0 8px rgba(51, 89, 83, 0.4);
    background: #ffffff;
  }
}

}

</style>
</head>
<body>
<!-- Splash SVG animado -->
<div id="splash" class="splash">
  <div class="splash-content">
    <svg id="logoMyFlow" width="260" height="100" viewBox="0 0 260 100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <!-- Gradiente animado compartilhado -->
        <linearGradient id="gradFlow" x1="0" y1="0" x2="1" y2="0">
          <stop offset="0%" stop-color="#D1A697">
            <animate attributeName="offset" values="-0.2;1.2" dur="2.5s" repeatCount="indefinite" />
          </stop>
          <stop offset="50%" stop-color="#FFFFFF">
            <animate attributeName="offset" values="0;1" dur="2.5s" repeatCount="indefinite" />
          </stop>
          <stop offset="100%" stop-color="#CBB1E6">
            <animate attributeName="offset" values="0.8;-0.2" dur="2.5s" repeatCount="indefinite" />
          </stop>
        </linearGradient>
      </defs>

      <!-- Texto principal -->
      <text x="0" y="42" font-size="38" font-weight="700" font-family="Poppins, sans-serif" fill="url(#gradFlow)">
        FemFlow
      </text>

      <!-- Subt√≠tulo ‚ÄúPot√™ncia Sustent√°vel‚Äù com mesmo gradiente -->
      <text x="0" y="80" font-size="22" font-weight="600" font-family="Poppins, sans-serif" fill="url(#gradFlow)">
        Treinamento Feminino
      </text>
    </svg>
  </div>
</div>



  <!-- Topo fixo com Premium -->
  <div class="topbar">
    <span class="brand">üèÉ‚Äç‚ôÄÔ∏è Endurance FemFlow</span>
    <a href="https://www.femflow.com.br/premium" id="btnPremium" target="_blank" title="Acesse o Plano Premium FemFlow" class="btn-app">üíé FEMFLOW CENTER</a>
  </div>

  <div class="container">
    <header>
      <div class="brand">Endurance <span style="color:var(--accent)">FemFlow</span> V24</div>
    </header>

    <p class="muted">Escolha perfil, dist√¢ncia da prova e disponibilidade. O sistema monta a semana com velocidade, resist√™ncia e pot√™ncia, ajusta ritmo pelos n√≠veis de esfor√ßo e gera PDF e cards.</p>

    <!-- ENTRADAS -->
    <section class="panel">
      <h2>Entradas</h2>
      <div class="panel panel-inner">
        <div class="panel-header">
          <h3>Teste</h3>
          <button id="btnInfoTeste" class="btn-icon" type="button" aria-label="Informa√ß√µes do teste">i</button>
        </div>
        <p class="muted">Realize um teste de 12 min sem parar na modalidade pretendida e insira as informa√ß√µes abaixo (dist√¢ncia em metros e PSE 0 a 10).</p>
        <div class="grid">
          <label>Dist√¢ncia no teste Cooper (12 min, em metros)
            <input id="cooperDist" type="number" min="200" step="10" value="3000">
          </label>
          <label>Modalidade do teste
            <select id="modalidade">
              <option value="corrida">Corrida</option>
              <option value="bike">Ciclismo</option>
              <option value="remo">Remo erg√¥metro</option>
              <option value="natacao">Nata√ß√£o (piscina)</option>
              <option value="natacao_aberta">Nata√ß√£o em √°guas abertas</option>
              <option value="eliptico">El√≠ptico</option>
              <option value="caminhada">Caminhada</option>
              <option value="trilha">Trail/Trilha</option>
              <option value="aqua_run">Aqua run</option>
              <option value="esqui">Esqui erg√¥metro</option>
            </select>
          </label>
          <label>Zona do teste / PSE principal
            <input id="zona" value="Z2 / PSE 5-6">
          </label>
          <label>PSE do teste Cooper (0‚Äì10)
            <input id="cooperPse" type="number" min="0" max="10" step="1" value="8">
          </label>
        </div>
      </div>

      <div class="panel panel-inner">
        <div class="panel-header">
          <h3>Prova objetivo</h3>
        </div>
        <div class="grid">
          <label>Perfil
            <select id="nivel">
              <option value="iniciante">Iniciante</option>
              <option value="intermediario">Intermedi√°rio</option>
              <option value="avancado">Avan√ßado</option>
            </select>
          </label>
          <label>Dist√¢ncia da prova (km)
            <input id="distProva" type="number" min="3" value="10">
          </label>
          <label>Dias da semana
            <input id="dias" value="ter,qui,sab,dom">
          </label>
          <label>Treinos por semana
            <input id="semanal" type="number" min="3" max="6" value="4">
          </label>
          <label>Fase do ciclo menstrual
            <select id="faseCiclo">
              <option value="folicular">Folicular (mais energia)</option>
              <option value="ovulatoria">Ovulat√≥ria (pico de pot√™ncia)</option>
              <option value="lutea">L√∫tea (mais sens√≠vel √† fadiga)</option>
              <option value="menstrual">Menstrual (reduzir volume)</option>
            </select>
          </label>
          <label>In√≠cio
            <input id="inicio" type="date">
          </label>
        </div>
      </div>

      <div class="actions" style="margin-top:1rem;">
        <button id="btnGerarPlano" class="btn primary">Gerar plano da semana</button>
      </div>
    </section>

    <div id="modalTeste" class="modal" aria-hidden="true">
      <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalTesteTitulo">
        <div class="modal-header">
          <h3 id="modalTesteTitulo">Como realizar o teste</h3>
          <button class="btn-icon" id="btnFecharModal" type="button" aria-label="Fechar">√ó</button>
        </div>
        <p>Fa√ßa 12 minutos cont√≠nuos na modalidade escolhida, mantendo o melhor ritmo sustent√°vel. Ao final, registre a dist√¢ncia em metros e a percep√ß√£o de esfor√ßo (PSE 0‚Äì10).</p>
      </div>
    </div>

    <!-- RESULTADOS -->
    <section class="panel">
      <h2>Plano semanal</h2>
      <div id="card-grid" class="grid-cards"></div>
    </section>

    <!-- GR√ÅFICO -->
    <section class="panel">
      <h2>Resumo semanal</h2>
      <canvas id="chart"></canvas>
    </section>

    <!-- A√á√ïES -->
    <div class="actions">
      <button id="btnExportarPDF" class="btn">üìÑ Exportar PDF</button>
      <button id="btnGerarCards" class="btn">üñºÔ∏è Gerar Cards</button>
      <button id="btnResetar" class="btn danger">üîÅ Resetar</button>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <script src="./app.js" defer></script>


</body>
</html>
